name: Build hellohttp Docker Image

on:
  workflow_dispatch:
  push:
    branches:
      - main
      - v0.38.x
      - v1.x
      - v2.x
    tags:
      - "v[0-9]+.[0-9]+.[0-9]+"
      - "v[0-9]+.[0-9]+.[0-9]+-alpha.[0-9]+"
      - "v[0-9]+.[0-9]+.[0-9]+-beta.[0-9]+"
      - "v[0-9]+.[0-9]+.[0-9]+-rc[0-9]+"

jobs:
  docker-build:
    uses: zrbecker/github-ci/.github/workflows/docker-build.yml@main
    with:
      ns: ${{ vars.HELLOHTTP_DOCKER_NS || 'zrbecker' }}
      repo: ${{ vars.HELLOHTTP_DOCKER_REPO || 'hellohttp' }}
      username: ${{ vars.DOCKERHUB_USERNAME }}
    secrets:
      password: ${{ secrets.DOCKERHUB_PASSWORD }}
